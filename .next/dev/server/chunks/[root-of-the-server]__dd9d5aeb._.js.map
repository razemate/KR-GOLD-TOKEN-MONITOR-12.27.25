{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Chris%20Saulon/Downloads/APPS%20-%20PROTOTYPING/Gold%20Token%20Monitor%20-%20Lovable/src/lib/normalize.ts"],"sourcesContent":["// lib/normalize.ts\n// Functions to normalize API responses according to the blueprint\n\nimport { Token, ChartPoint } from '@/types/gold';\n\nexport function normalizeToken(rawToken: any): Token {\n  // Validate and normalize token data according to blueprint specifications\n  return {\n    id: rawToken.id || '',\n    symbol: (rawToken.symbol || '').toUpperCase(),\n    name: rawToken.name || '',\n    image: rawToken.image || '',\n    priceUsd: typeof rawToken.current_price === 'number' ? rawToken.current_price : (typeof rawToken.priceUsd === 'number' ? rawToken.priceUsd : 0),\n    change24hPct: typeof rawToken.price_change_percentage_24h === 'number' ? rawToken.price_change_percentage_24h : (typeof rawToken.change24hPct === 'number' ? rawToken.change24hPct : null),\n    marketCapUsd: typeof rawToken.market_cap === 'number' ? rawToken.market_cap : (typeof rawToken.marketCapUsd === 'number' ? rawToken.marketCapUsd : null),\n    volume24hUsd: typeof rawToken.total_volume === 'number' ? rawToken.total_volume : (typeof rawToken.volume24hUsd === 'number' ? rawToken.volume24hUsd : null),\n    circulatingSupply: typeof rawToken.circulating_supply === 'number' ? rawToken.circulating_supply : (typeof rawToken.circulatingSupply === 'number' ? rawToken.circulatingSupply : null),\n    totalSupply: typeof rawToken.total_supply === 'number' ? rawToken.total_supply : (typeof rawToken.totalSupply === 'number' ? rawToken.totalSupply : null),\n    high24h: typeof rawToken.high_24h === 'number' ? rawToken.high_24h : (typeof rawToken.high24h === 'number' ? rawToken.high24h : null),\n    low24h: typeof rawToken.low_24h === 'number' ? rawToken.low_24h : (typeof rawToken.low24h === 'number' ? rawToken.low24h : null)\n  };\n}\n\nexport function normalizeChartPoint(rawPoint: any): ChartPoint {\n  // Validate and normalize chart point data according to blueprint specifications\n  // CoinGecko returns [timestamp, price]\n  if (Array.isArray(rawPoint) && rawPoint.length >= 2) {\n    return {\n      t: typeof rawPoint[0] === 'number' ? rawPoint[0] : 0,\n      price: typeof rawPoint[1] === 'number' ? rawPoint[1] : 0\n    };\n  }\n  return {\n    t: typeof rawPoint.t === 'number' ? rawPoint.t : 0,\n    price: typeof rawPoint.price === 'number' ? rawPoint.price : 0\n  };\n}\n\nexport function normalizeTokenList(rawTokens: any[]): Token[] {\n  if (!Array.isArray(rawTokens)) return [];\n  return rawTokens.map(token => normalizeToken(token));\n}\n\nexport function normalizeChartPoints(rawPoints: any[]): ChartPoint[] {\n  if (!Array.isArray(rawPoints)) return [];\n  return rawPoints.map(point => normalizeChartPoint(point));\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;AACnB,kEAAkE;;;;;;;;;;;AAI3D,SAAS,eAAe,QAAa;IAC1C,0EAA0E;IAC1E,OAAO;QACL,IAAI,SAAS,EAAE,IAAI;QACnB,QAAQ,CAAC,SAAS,MAAM,IAAI,EAAE,EAAE,WAAW;QAC3C,MAAM,SAAS,IAAI,IAAI;QACvB,OAAO,SAAS,KAAK,IAAI;QACzB,UAAU,OAAO,SAAS,aAAa,KAAK,WAAW,SAAS,aAAa,GAAI,OAAO,SAAS,QAAQ,KAAK,WAAW,SAAS,QAAQ,GAAG;QAC7I,cAAc,OAAO,SAAS,2BAA2B,KAAK,WAAW,SAAS,2BAA2B,GAAI,OAAO,SAAS,YAAY,KAAK,WAAW,SAAS,YAAY,GAAG;QACrL,cAAc,OAAO,SAAS,UAAU,KAAK,WAAW,SAAS,UAAU,GAAI,OAAO,SAAS,YAAY,KAAK,WAAW,SAAS,YAAY,GAAG;QACnJ,cAAc,OAAO,SAAS,YAAY,KAAK,WAAW,SAAS,YAAY,GAAI,OAAO,SAAS,YAAY,KAAK,WAAW,SAAS,YAAY,GAAG;QACvJ,mBAAmB,OAAO,SAAS,kBAAkB,KAAK,WAAW,SAAS,kBAAkB,GAAI,OAAO,SAAS,iBAAiB,KAAK,WAAW,SAAS,iBAAiB,GAAG;QAClL,aAAa,OAAO,SAAS,YAAY,KAAK,WAAW,SAAS,YAAY,GAAI,OAAO,SAAS,WAAW,KAAK,WAAW,SAAS,WAAW,GAAG;QACpJ,SAAS,OAAO,SAAS,QAAQ,KAAK,WAAW,SAAS,QAAQ,GAAI,OAAO,SAAS,OAAO,KAAK,WAAW,SAAS,OAAO,GAAG;QAChI,QAAQ,OAAO,SAAS,OAAO,KAAK,WAAW,SAAS,OAAO,GAAI,OAAO,SAAS,MAAM,KAAK,WAAW,SAAS,MAAM,GAAG;IAC7H;AACF;AAEO,SAAS,oBAAoB,QAAa;IAC/C,gFAAgF;IAChF,uCAAuC;IACvC,IAAI,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,IAAI,GAAG;QACnD,OAAO;YACL,GAAG,OAAO,QAAQ,CAAC,EAAE,KAAK,WAAW,QAAQ,CAAC,EAAE,GAAG;YACnD,OAAO,OAAO,QAAQ,CAAC,EAAE,KAAK,WAAW,QAAQ,CAAC,EAAE,GAAG;QACzD;IACF;IACA,OAAO;QACL,GAAG,OAAO,SAAS,CAAC,KAAK,WAAW,SAAS,CAAC,GAAG;QACjD,OAAO,OAAO,SAAS,KAAK,KAAK,WAAW,SAAS,KAAK,GAAG;IAC/D;AACF;AAEO,SAAS,mBAAmB,SAAgB;IACjD,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,OAAO,EAAE;IACxC,OAAO,UAAU,GAAG,CAAC,CAAA,QAAS,eAAe;AAC/C;AAEO,SAAS,qBAAqB,SAAgB;IACnD,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,OAAO,EAAE;IACxC,OAAO,UAAU,GAAG,CAAC,CAAA,QAAS,oBAAoB;AACpD"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Chris%20Saulon/Downloads/APPS%20-%20PROTOTYPING/Gold%20Token%20Monitor%20-%20Lovable/src/app/api/tokens/%5Bid%5D/chart/route.ts"],"sourcesContent":["import { NextRequest } from \"next/server\";\nimport { normalizeChartPoints } from \"@/lib/normalize\";\n\nexport async function GET(request: NextRequest, { params }: { params: { id: string } }) {\n  const { id } = params;\n  const cg = process.env.COINGECKO_API_KEY;\n\n  try {\n    const chartUrl = new URL(`https://api.coingecko.com/api/v3/coins/${id}/market_chart`);\n    chartUrl.searchParams.set('vs_currency', 'usd');\n    chartUrl.searchParams.set('days', '7');\n\n    const headers: Record<string, string> = {\n      'Accept': 'application/json',\n    };\n    \n    // Only add API key if present (optional per blueprint)\n    if (cg) {\n      headers['x-cg-demo-api-key'] = cg;\n    }\n\n    const response = await fetch(chartUrl.toString(), {\n      headers,\n      next: {\n        revalidate: 300,\n      }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return Response.json({ error: 'Failed to fetch chart data from CoinGecko', details: errorData }, { status: response.status });\n    }\n\n    const rawData = await response.json();\n    const normalizedPoints = normalizeChartPoints(rawData.prices || []);\n\n    return new Response(JSON.stringify(normalizedPoints), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Cache-Control': 's-maxage=300, stale-while-revalidate=1800'\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching chart data:', error);\n    return Response.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AACA;;AAEO,eAAe,IAAI,OAAoB,EAAE,EAAE,MAAM,EAA8B;IACpF,MAAM,EAAE,EAAE,EAAE,GAAG;IACf,MAAM,KAAK,QAAQ,GAAG,CAAC,iBAAiB;IAExC,IAAI;QACF,MAAM,WAAW,IAAI,IAAI,CAAC,uCAAuC,EAAE,GAAG,aAAa,CAAC;QACpF,SAAS,YAAY,CAAC,GAAG,CAAC,eAAe;QACzC,SAAS,YAAY,CAAC,GAAG,CAAC,QAAQ;QAElC,MAAM,UAAkC;YACtC,UAAU;QACZ;QAEA,uDAAuD;QACvD,IAAI,IAAI;YACN,OAAO,CAAC,oBAAoB,GAAG;QACjC;QAEA,MAAM,WAAW,MAAM,MAAM,SAAS,QAAQ,IAAI;YAChD;YACA,MAAM;gBACJ,YAAY;YACd;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;gBAA6C,SAAS;YAAU,GAAG;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC7H;QAEA,MAAM,UAAU,MAAM,SAAS,IAAI;QACnC,MAAM,mBAAmB,IAAA,iJAAoB,EAAC,QAAQ,MAAM,IAAI,EAAE;QAElE,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,mBAAmB;YACpD,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IACzE;AACF"}}]
}